@main("Entreprises - Rencontres IF") {

<!-- TODO ajouter authentification des étudiants
-->

<script id="templateSearchStages" type="text/x-handlebars-template" >
	{{#each stages}}
		<tr deploye=0>
			<td class="bouton"><button class="btn btn-info btn-mini"><i class="icon-chevron-down icon-white"></i></button></td>
			<td>
				{{#if titre}}
					{{titre}}
				{{else}}
					Offre de stage
				{{/if}}
			</td>
			<td>{{this.entreprise}}</td>
			<td>{{this.lieu}}</td>
			<td>{{this.annee}}ème année</td>
			<td class="desc-stage" style="display:none;">
				<p>
					{{#if description}}
						{{description}}
					{{else}}
						Pas de description, voir fichier joint.
					{{/if}}
				</p>
				{{#if contact}}
					<p><b>Contact</b> : {{this.contact}}</p>
				{{/if}}
				<p>
					<a href="https://intranet-if.insa-lyon.fr/stages/descriptif/{{this.lien_fichier}}">Plus d'info</a>
				</p>
			</td>
		</tr>;
	{{/each}}
</script>

<div id="stages">

	<h1>Recherche de stages</h1>
	<div id="annuaire" class="row">
		<div id="description" class="columns">
			<div class="alert alert-block alert-info" style="text-align: justify;">
					<h4 class="alert-heading">Propositions de Stage - Formulaire Etudiant</h4>
					Vous pouvez rechercher par mots-clés dans le titre ou la description du sujet proposé, par
				année pour laquelle vous êtes intéressés, par lieu (en entrant un nom de ville ou un numéro
				de département) ou encore par nom d'entreprise directement si vous le souhaitez.<br/>
				Vous pouvez effectuer une recherche tronquée à l'aide de l'opérateur joker <strong>*</strong>. Par exemple,
				rechercher avec le mot-clé <i>"mobil*"</i> permettra de rechercher tout ce qui commence par <i>mobil</i>,
				donc renverra les résultats <i>mobile, mobiles, mobilité,...</i>
			</div>
		</div>

		<div class="columns">
			<form class="form alert" id="form_stages">
				<fieldset class="control-group form-search">
					<input id="mots_cles" type="text" class="input-medium search-query" placeholder="Mots-clés">
					<button  id="submit_recherche" type="submit" class="btn btn-primary"><i class="icon-search icon-white"></i> Rechercher</button>
							<select id="annee">
								<option value="">Toutes années</option>
								<option value="3">3ème année</option>
								<option value="4">4ème année</option>
								<option value="5">5ème année (PFE)</option>
							</select>

						<label class="control-label" for="lieu">Lieu</label>
						<input type="text" id="lieu" placeholder="Lieu" />

						<label class="control-label" for="entreprise">Entreprise</label>
						<input type="text" id="entreprise" placeholder="Entreprise" />
				</fieldset>
			</form>
		</div>

		<div id="information" class="alert alert-info"> </div>
		
	</div>

	<table id="fenetre" class="table table-striped table-bordered tablesorter">
		<thead>
			<th style="text-align:center;"><i class="icon-th-list"></th>
			<th>Titre</th>
			<th>Entreprise</th>
			<th>Lieu</th>
			<th>Année(s)</th>
			<th style="display:none;">Description</th>
		</thead>
		<tbody id="resultats">
		</tbody>
	</table>

</div>

<script>
        var Stages = {};
        Stages.url_cible = "@routes.Etudiants.apiStages()";
</script>
<script src="@routes.Assets.at("javascripts/etudiants/stages.js")"></script>
<script src="@routes.Assets.at("javascripts/handlebars-1.0.0.beta.6.js")"></script>
}